{% extends 'base.html' %}

{% block header %}
<h1></h1>
{% endblock %}

{% block content %}
<div style='float:left'>
  <a href='\editcook'>Edit Cook</a><br />
  Title: {{ cook.Title }}<br />
  Start: {{ cook.Start }}<br />
  Duration: {{ cook.Duration }}<br />
</div>

<div style='float:left'>
  <table>
    <tr>
      <td>Sensor</td>
      <td>Min</td>
      <td>Max</td>
    </tr>
    <tr>
      <td>Sensor 1</td>
      <td>{{ minTemp[0] }}</td>
      <td>{{ maxTemp[0] }}</td>
    </tr>
    <tr>
      <td>Sensor 2</td>
      <td>{{  minTemp[1] }}</td>
      <td>{{  maxTemp[1] }}</td>
    </tr>
    <tr>
      <td>AirTemp</td>
      <td>{{  minTemp[2] }}</td>
      <td>{{  maxTemp[2] }}</td>
    </tr>
  </table>
</div>
<script src="static/Chart.bundle.min.js"></script>
<script src="static/utils.js"></script>

<canvas id="chart"></canvas>
<script>
  var ctx = document.getElementById('chart').getContext('2d');
  var myChart = new Chart(ctx,
    {
      type: 'line',
      data: {
        datasets: [{
          label: 'Sensor 1',
          data: [
              {% for item in temps %}
                {% if item.Temp1 > 0 %} { x: '{{item.EventDate}}', y: {{ item.Temp1 }}, }, {% endif %}
              {% endfor %}
              ],
          backgroundColor: window.chartColors.red,
					borderColor: window.chartColors.red,
					fill: false,
      borderWidth: 1
      },
      {
          label: 'Sensor 2',
          backgroundColor: window.chartColors.blue,
					borderColor: window.chartColors.blue,
					fill: false,
          data: [
              {% for item in temps %}
              {% if item.Temp2 > 0 %} { x: '{{item.EventDate}}', y: {{ item.Temp2 }}, }, {% endif %}
              {% endfor %}
              ],
      },
      {
          label: 'Sensor 3',
          backgroundColor: window.chartColors.green,
					borderColor: window.chartColors.green,
					fill: false,
          data: [
              {% for item in temps %}
                {% if item.Temp3 > 0 %} { x: '{{item.EventDate}}', y: {{ item.Temp3 }}, }, {% endif %}
              {% endfor %}
              ],
      },
      {
          label: 'Smoker Target',
          backgroundColor: window.chartColors.grey,
					borderColor: window.chartColors.green,
					fill: false,
          data: [ { x: '{{cook.Start}}', y: '{{cook.SmokerTarget}}' }, 
                  { x: '{{currentDT}}', y: '{{cook.SmokerTarget}}' }],
      },
      {
          label: 'Target',
          backgroundColor: window.chartColors.grey,
					borderColor: window.chartColors.green,
					fill: false,
          data: [ { x: '{{cook.Start}}', y: '{{cook.Target}}' }, 
                  { x: '{{currentDT}}', y: '{{cook.Target}}' }],
      },
    ]},
  options: {
    scales: {
      xAxes: [{
        type: 'time',
        time: { displayFormats: { quarter: 'h:mm a' } }
      }]
    }
  }
  });
</script>

{% endblock %}